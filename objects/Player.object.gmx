<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>Spr_Player_1</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>Spr_Mask_Player</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>canmove = 1
// Variables iniciales

grav = 1;
spd = 2;
jspd = 7;
hspd = 0;
vspd = 1;
Hit = 0;
Jump = 0;
Airjump = 1;
Disparo = 0;
Dash = 1;
rdash = 1
ldash = 0

gamepad_set_axis_deadzone(0,0.7);
gamepad_set_button_threshold(0,0.5);
gamepad_set_vibration(0,0,0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>canmove = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>canmove = 0;
if global.Sword = 0
{
    if global.Equip = 1
        {
        //Sword 1 LV1
        if global.LvS1 = 0
        {
            if Player.rdash = 1
            {
            sprite_index = Spr_Player_4;
            image_speed = 0.6;
            instance_create(x-3,y-6,Att_1_1);
            alarm[3] = 4;
            }
            if Player.ldash = 1
            {
            sprite_index = Spr_Player_4;
            image_speed = 0.6;
            instance_create(x+3,y-6,Att_1_1);
            alarm[3] = 4;
            }
        }
        //Sword 1 LV2
        if global.LvS1 = 1
        {
            if Player.rdash = 1
            {
            sprite_index = Spr_Player_4;
            image_speed = 0.6;
            instance_create(x-1,y-7,Att_1_2);
            alarm[3] = 6;
            }
            if Player.ldash = 1
            {
            sprite_index = Spr_Player_4;
            image_speed = 0.6;
            instance_create(x+1,y-7,Att_1_2);
            alarm[3] = 6;
            }
        }
        //Sword 1 LV3
        if global.LvS1 = 2
        {
            if Player.rdash = 1
            {
            sprite_index = Spr_Player_4;
            image_speed = 0.6;
            instance_create(x-1,y-7,Att_1_3);
            alarm[3] = 6;
            }
            if Player.ldash = 1
            {
            sprite_index = Spr_Player_4;
            image_speed = 0.6;
            instance_create(x+1,y-7,Att_1_3);
            alarm[3] = 6;
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>Hit = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if global.HP &gt;=1 {alarm[1]=room_speed*1.5; global.HP-=1;
 timeline_add (); 
 instance_create(x,y,Eff_Hitted);
 timeline_index=Hit_Timeline;
 timeline_loop= false;
 timeline_position= 0;
 timeline_running= true;
 timeline_speed=1;
 }
//if global.HP &lt;1 {instance_create (x,y,Obj_Explo_1)}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//platform physics

var rkey = keyboard_check(vk_right) || (gamepad_axis_value(0,gp_axislh) &gt; 0) ;
var lkey = keyboard_check(vk_left) || (gamepad_axis_value(0,gp_axislh) &lt; 0);
var jkey = keyboard_check_pressed(ord('Z')) || (gamepad_button_check_pressed(0,gp_face1));
var wkey = keyboard_check_pressed(ord('A')) || (gamepad_button_check_pressed(0,gp_face2));
var akey = keyboard_check_pressed(ord('X')) || (gamepad_button_check_pressed(0,gp_face3));

if (lkey) {
    rdash = 0;
    ldash = 1;
    }
if (rkey) {
    rdash = 1;
    ldash = 0;
    }
if canmove= 1
{

//check v. ground 
if(place_meeting(x,y+1, Block)) {
    Airjump = 1;
    Dash = 1;
    vspd = 0;
    
    //jumping
    if(jkey) {
       vspd = -jspd;
       //sound_play(Snd_PJum);
       vspd = -jspd;
       //repeat (3) { instance_create(x,y+8,Tierra)};
    }
    
    
    
} else {
    // gravity
    if (vspd &lt; 5) {
        vspd += grav;
    }
    
    
    
    //Chek for AirJump
    if (Airjump &gt; 0 )
    {
        if (jkey) {
            vspd = -6;
            Airjump -= 1;
            //sound_play(Snd_PJump2);
            //repeat (3) { instance_create(x,y+2,Eff_PU2)};
            }
    }
};
// moving right
if (rkey) {
    hspd = spd;
    rdash = 1;
    ldash = 0;
    
    if (Dash &gt; 0 )
    {
    if(!place_meeting(x+1,y, Block)) {
    if (wkey){
    instance_create(x,y,Eff_Dash_Player);
    vspd = -2;
    hspd = 14;
    Dash -= 1;
    
    }}}; 
};

// moving left
if (lkey) {
    hspd = -spd;
    rdash = 0;
    ldash = 1;
    
    if (Dash &gt; 0 )
    {
    if(!place_meeting(x+1,y, Block)) {
    if (wkey){
    instance_create(x,y,Eff_Dash_Player);
    vspd = -2;
    hspd = -14;
    Dash -=1;
    }}};
};

// check for not moving
if ((!rkey &amp;&amp; !lkey) || (rkey &amp;&amp; lkey)) {
    hspd = 0;
};

// horizontal collisions
if (place_meeting(x+hspd, y, Block)) {
    while (!place_meeting(x+sign(hspd), y, Block)) {
        x += sign(hspd);
        }
        hspd = 0
};

// move horizontal
x+= hspd;

// vertical collisions
if (place_meeting(x, y+vspd, Block)) {
    while (!place_meeting(x, y+sign(vspd), Block)) {
        y+= sign(vspd);
        }
        vspd = 0
};

// move vertically
y+= vspd;

//Control the sprites
if (yprevious !=y) {
    sprite_index = Spr_Player_3;
    image_speed = 0;
    image_index = y&gt;yprevious;
}   else    {
    if (xprevious !=x) {
        sprite_index = Spr_Player_2;
        image_speed = 0.3;
        } else {
        sprite_index = Spr_Player_1;
        image_speed = 0.4;}
};

//Control the direction the player is facing
if (xprevious &lt; x) {
    image_xscale = 1;
} else if (xprevious &gt; x){
    image_xscale = -1;
};

if (akey)
{
alarm[2] = 1;
}


//if global.HP &lt;= 0 {
//gamepad_set_vibration(0,1,1)
//global.PauseAv = 1;
//instance_create(x,y,Screen_Shake);
//instance_create(x,y,Obj_Explo_1); instance_destroy()  };//esto se saca si ocupo lo de abajo
//instance_create(view_xview+80,view_yview+77,Fail_Stage);
//sound_play (Explot) };

// Poweres

//if keyboard_check_released(ord('Z')) {if (vspd&lt;0) {vspd*=0.5;}}
//if (gamepad_button_check_released(0,gp_face1))  {if (vspd&lt;0) {vspd*=0.5;}}
};
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="Block">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if Hit = 0 {alarm [0]=1; Hit = 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.LvS1 += 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>5,5</point>
    <point>5,5</point>
  </PhysicsShapePoints>
</object>
